@page "/profile"

@using Thryft.Models
@using Thryft.Services
@using Microsoft.AspNetCore.Components.Authorization
@inject UserService userService
@inject AuthenticationStateProvider authStateProvider

@rendermode InteractiveServer

<PageTitle>Profile</PageTitle>

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-10 d-flex justify-center">
    <MudCard Class="pa-6" Style="text-align:center;">

        <MudText Typo="Typo.h5" Class="mb-4">Your Profile</MudText>

        @if (user is not null)
        {
            <MudText Typo="Typo.subtitle1" Class="mb-2"><b>Name:</b> @user.Name</MudText>
            <MudText Typo="Typo.subtitle1"><b>Email:</b> @user.Email</MudText>
        }
        else
        {
            <MudText Typo="Typo.body1" Color="Color.Secondary">
                No user information available.
            </MudText>
        }

    </MudCard>
</MudContainer>

@code {
    private User? user;

    protected override async Task OnInitializedAsync()
    {

        // testing
        user = new User
        {
            Name = "Demo User",
            Email = "demo@thryft.com"
        };

        // to get the actual logged in user:
        // var state = await authStateProvider.GetAuthenticationStateAsync();
        // user = await userService.GetCurrentUserAsync(state.User);
    }
}
